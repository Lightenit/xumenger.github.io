---
layout: post
title: 什么是自动化测试？
categories: 项目管理之测试
tags: 测试 自动化 程序质量 项目管理 抽象 输入 输出 delphi
---

最近到上海出差帮助上交所测试新接口，本来以为只是简单的测试接口是不是可以调用成功就可以了，所以就做了一个简单的需要人工输入、点击、发送报文的工具。结果到了交易所，人家却希望我们做一个自动化测试的工具：可以在工具上维护各种场景对应的测试用例，可以自动化运行所有这些测试用例，然后展示测试结果。一脸懵逼，一方面是之前开发的工具基本上没有什么用了，另一方面是这个工作主要涉及到的是测试、自动化测试领域的知识，而我也只不过是看过2、3本关于测试的书籍而已，从来没有实际操作过

>这也反映了软件行业一直存在的一个问题：一开始没有弄清楚客户的真实需求，到设计那里、再到开发那里将会导致大量的返工

不过既然人家提了需求，那硬着头皮也得做出来：先去了解什么是自动化测试、自动化测试的策略是什么样的，再去一步步的自己设计实现

>正好也一直想了解测试和自动化测试，挺好的一个机会！

##什么是自动化测试

首先什么是测试？

>按照我的个人理解就是，输入一个测试数据（或者是通过手动点击按钮的方式、或者是通过表单的方式、或者是程序内部调用函数的入参），得到一个输出结果（或者是可视化的界面展示、或者是调用函数的出参），然后将输出结果与预期的结果进行对比，如果一致则说明测试通过，否则说明测试未通过。当然也需要考虑预期本身是错误的可能性！

那么测试的重点是什么？

>是否能将所有的场景都测试到？每个字段的每种可能值是不是都测试到了？对于各个字段的各个边界值是否重点测试了？是否测试了对于不合法的输入程序会有怎样的处理和输出？从输入到最终输出的中间每一层的子输入和子输出是不是都测试到了？

就我们公司而言，目前主要是手工测试的方式，手工输入信息、手工检查输出结果。但正因为是手工的方式，而且毕竟是人，总有会出现很多问题

>最简单的，如果有n个字段，每个字段有m个值域，那么至少需要维护m^n个测试用例才能将所有情况都覆盖到。这个公式只对一层逻辑有效，而实际的项目架构中，从输入到最终的输出，中间往往也会经历多层的子输入和子输出，那么情况就变得更加复杂了

所以想要纯粹通过人工来控制这么大的复杂度确实是很难很难的！

什么是自动化测试？参考[《在做自动化测试之前你需要知道的》](http://www.cnblogs.com/fnng/p/3653793.html)

>广义上来讲，自动化包括一切通过工具（程序）的方式来代替或辅助手工测试的行为，包括性能测试工具（loadrunner、jmeter），或自己所写的一段程序，用于生成1~100个测试数据。狭义上来讲，通过工具记录或编写脚本的方式模拟手工测试的过程，通过回放或运行脚本来执行测试用例，从而代替人工对系统的功能进行验证。而且自动化测试可以重复执行，所以在进行回归测试时有天生的优势

>自动化测试，其实和单元测试有些类似，单元测试的目的是可以一次写，多次运行，对于测试驱动以及后期维护真是有非常多的好处，用自动化测试工具也是如此，主要的目的是为了回归测试；单元测试时，要先准备好数据，再测试，最后再进行数据清理，自动化测试也是如此

最简单的将计算机进行抽象就是：输入-->处理-->输出。但这个模型所涵盖的领域和维度太多，小至调用一个函数的输入到输出；大到一个普通的用户在网站上填写表单，中间经过前端处理、网络传输、后台逻辑处理、数据库处理，再原路返回，呈现给用户的输出

>在《Google测试之道》一书中提到，比较好的测试投入比例应该是：70%的投入在单元测试，20%的投入在集成和接口测试，10%的投入在UI层的自动化测试。而单元测试主要是开发人员在编写功能代码同时使用单元测试框架（比如Java的JUnit、Python的unittest等）编写对应的单元测试代码，所以最好是开发人员自己来做主要的测试

>在软件开发中，从需求，到设计，到开发，到测试，越往后出现需求变更，那么成本就越大。对应在测试领域，越往上层，投入的成本越高，所以应该把更多的自动化测试放在单元测试和接口测试阶段，而不是在UI测试阶段

##没有绝对的好，只有相对的适合

按照上面的描述，给人感觉自动化测试就是完美，而手工测试就是一无是处，而实际并不是这样。一个东西既然存在就有它存在的原因！对于测试来说，有些领域确实使用自动化测试可以更快、更少出错，但是有些场景还是必须使用手工测试

>自动化测试有它适用的场景；手工测试也有它所适用的场景

自动化测试，需要测试人员开发测试脚本、编写测试用例，同样也需要使用SVN、Git等版本控制工具来进行管理，所以这将会是一个周期很长的工作。如果对应的软件项目是一个周期很短的工程，那么也就没有充分的时间去设计和编写自动化测试，这时候可能手工测试会更适用

自动化测试有一个很大的要求就是一次性维护好测试用例后，可以重复执行，在回归测试中有很大的用武之地。如果某个项目需求今天变，明天变，那么工程代码需要根据需求进行变化，同样的自动化测试的代码、脚本、用例也处于一直变化当中，自动化代码、脚本本身也是程序，还需要进行调试、优化的工作。明显会花费很多的维护成本，如果发现这样维护自动化测试的成本比手工测试高，那么还不如一开始就做手工测试。毕竟在一个企业中，哪管你技术牛不牛逼，能省钱、能挣钱才是王道

自动化测试毕竟是机器来做的，所以它只能按照测试人员编写的脚本、测试用例去被动的执行，所以自动化测试的质量完全依赖于测试人员编写的脚本、测试用例的质量。而开发出来的程序最终是要给到用户使用的，一个具体人去使用软件，就会有人的各种想法、操作方式，就会出现各种状况，而机器是没有想象力的，所以很多“莫名其妙”的场景可能根本做不到（除非测试人员真的很厉害，各种“神奇”的场景都对应写了脚本、写了用例），所以还是有必要将自动化测试和手工测试结合起来使用的

自动化测试最终还是要由人来设计和编写，所以还是要求测试人员自己有很强的测试能力和技术能力

>总的来说，自动化测试还只是适用于那种大量、复杂、无脑、重复劳动的场景，这也正是计算机可以帮助人类解脱出来的领域

了解自动化测试工具、自动化测试的操作逻辑，建议阅读[《在做自动化测试之前你需要知道的》](http://www.cnblogs.com/fnng/p/3653793.html)、[《QTP之delphi试用感想一（自动化测试）》](http://www.cnblogs.com/findumars/p/5995196.html)

##如何设计和开发一个简单的自动化测试框架

计算机软件最终可以抽象为：输入-->处理-->输出。对应的测试就可以抽象为：输入测试用例-->检查输出结果

软件有多种模式，有开发可视化的网页、开发供他人调用的接口、后台业务逻辑处理的开发等，对应测试的模式也是不同的。虽然同为输入和输出，但其形式确实千差万别，可视化的网页的输入可能是点击，输出是页面的跳转；API的输入则是入参，输出则是出参和返回值

所以要想做一个自动化测试的框架，首先要弄清楚你要测试的对象是什么？它有着怎么样的输入和输出逻辑？

按照测试的逻辑，自动化测试工具应该实现如下功能：

* 支持用例的维护和管理
* 维护输入
* 维护预期结果
* 调用程序获取实际输出结果
* 对比实际的输出结果和预期结果来判断用例是否执行成功

##参考资料和文章

* [《在做自动化测试之前你需要知道的》](http://www.cnblogs.com/fnng/p/3653793.html)
* [《自动化测试总结（一）》](http://blog.csdn.net/star890124/article/details/48311347)
* [《自动化测试总结（二）》](http://blog.csdn.net/star890124/article/details/48311361)
* [《QTP之delphi试用感想一（自动化测试）》](http://www.cnblogs.com/findumars/p/5995196.html)
* [《》]()
* [《》]()
* [《》]()
* [《》]()
* [《》]()



。。。。。。。。。。。。。。。。。。。。。。。。
目标
设计一个框架，可以适用于我平时的工作，方便我自测
框架要和任何一种测试的逻辑抽离，必须抽象出所有自动化测试公用的东西
